/*!
 * Metaproject v0.10.0 (http://bravado.github.io/metaproject/)
 * Copyright 2011-2015 Bravado
 * Licensed under MIT (http://opensource.org/licenses/MIT)
*/
!function(a,b,c){"use strict";var d=a.metaproject={};c.punches.enableAll(),d.EventEmitter=function(){this.callbacks={}},d.EventEmitter.prototype={on:function(a,b){if("function"==typeof b){a=a.split(/\s+/);for(var c,d=0,e=a.length;e>d;d++)c=a[d],(this.callbacks[c]=this.callbacks[c]||[]).push(b),e>1&&(b.typed=!0)}return this},one:function(a,b){return b&&(b.one=!0),this.on(a,b)},off:function(a){a=a.split(/\s+/);for(var b=0;b<a.length;b++)this.callbacks[a[b]]=[];return this},trigger:function(a){for(var b,c=[].slice,d=c.call(arguments,1),e=this.callbacks[a]||[],f=0;f<e.length;++f)b=e[f],b.one&&b.done||(b.apply(this,b.typed?[a].concat(d):d),b.done=!0);return this}},b.fn.applyBindings=function(a){return this.data("viewModel",a).each(function(b,d){c.applyBindings(a,d)}),this}}(window,jQuery,ko),!function(){var a=window.Path={version:"0.8.4",map:function(b){return a.routes.defined.hasOwnProperty(b)?a.routes.defined[b]:new a.core.route(b)},root:function(b){a.routes.root=b},rescue:function(b){a.routes.rescue=b},history:{initial:{},pushState:function(b,c,d){a.history.supported?a.dispatch(d)&&history.pushState(b,c,d):a.history.fallback&&(window.location.hash="#"+d)},popState:function(b){var c=!a.history.initial.popped&&location.href==a.history.initial.URL;a.history.initial.popped=!0,c||a.dispatch(document.location.pathname)},listen:function(b){if(a.history.supported=!(!window.history||!window.history.pushState),a.history.fallback=b,a.history.supported)a.history.initial.popped="state"in window.history,a.history.initial.URL=location.href,window.onpopstate=a.history.popState;else if(a.history.fallback){for(route in a.routes.defined)"#"!=route.charAt(0)&&(a.routes.defined["#"+route]=a.routes.defined[route],a.routes.defined["#"+route].path="#"+route);a.listen()}}},match:function(b,c){var d,e,f,g,h,i={},j=null;for(j in a.routes.defined)if(null!==j&&void 0!==j)for(j=a.routes.defined[j],d=j.partition(),g=0;g<d.length;g++){if(e=d[g],h=b,e.search(/:/)>0)for(f=0;f<e.split("/").length;f++)f<h.split("/").length&&":"===e.split("/")[f].charAt(0)&&(i[e.split("/")[f].replace(/:/,"")]=h.split("/")[f],h=h.replace(h.split("/")[f],e.split("/")[f]));if(e===h)return c&&(j.params=i),j}return null},dispatch:function(b){var c,d;if(a.routes.current!==b){if(a.routes.previous=a.routes.current,a.routes.current=b,d=a.match(b,!0),a.routes.previous&&(c=a.match(a.routes.previous),null!==c&&null!==c.do_exit&&c.do_exit()),null!==d)return d.run(),!0;null!==a.routes.rescue&&a.routes.rescue()}},listen:function(){var b=function(){a.dispatch(location.hash)};""===location.hash&&null!==a.routes.root&&(location.hash=a.routes.root),"onhashchange"in window&&(!document.documentMode||document.documentMode>=8)?window.onhashchange=b:setInterval(b,50),""!==location.hash&&a.dispatch(location.hash)},core:{route:function(b){this.path=b,this.action=null,this.do_enter=[],this.do_exit=null,this.params={},a.routes.defined[b]=this}},routes:{current:null,root:null,rescue:null,previous:null,defined:{}}};a.core.route.prototype={to:function(a){return this.action=a,this},enter:function(a){return a instanceof Array?this.do_enter=this.do_enter.concat(a):this.do_enter.push(a),this},exit:function(a){return this.do_exit=a,this},partition:function(){for(var a,b,c=[],d=[],e=/\(([^}]+?)\)/g;a=e.exec(this.path);)c.push(a[1]);for(d.push(this.path.split("(")[0]),b=0;b<c.length;b++)d.push(d[d.length-1]+c[b]);return d},run:function(){var b,c,d=!1;if(a.routes.defined[this.path].hasOwnProperty("do_enter")&&a.routes.defined[this.path].do_enter.length>0)for(b=0;b<a.routes.defined[this.path].do_enter.length;b++)if(c=a.routes.defined[this.path].do_enter[b].apply(this,null),c===!1){d=!0;break}d||a.routes.defined[this.path].action()}}}(),function(a){"use strict";var b=a.metaproject||{};b.Application=function(a){var b=this;b.debug=0,b.root="#/",b.notFound=function(){},"function"==typeof a?b.init=a:(b.init=function(){},$.extend(b,a)),Path.root(b.root),Path.rescue(b.notFound),b.run=function(a){ko.applyBindings(b,a),b.init.call(b),Path.listen()}},$.fn.include=function(a,c){var d=this,e=b.debug?"?ts="+(new Date).getTime():"";return d.data("loaded")===a?this:this.addClass("loading").load(a+e,function(){d.data("loaded",a).removeClass("loading"),void 0!==c&&c()})},ko.bindingHandlers.include={init:function(a,b,c){var d=$(a),e=b(),f=c().url;e instanceof Array?d.include(e[0],e[1]):d.include(e),f||d.children().trigger("activate",d)}},ko.bindingHandlers.url={init:function(b,c,d){var e=$(a),f=$(b),g=c();if("string"!=typeof g)throw"url must be a string";f.css({visibility:"hidden",position:"absolute",height:0,overflow:"hidden"});var h=Path.map("#"+g).to(function(){if("visible"!==f.css("visibility")){var a={type:"activate",url:g,params:this.params};f.css({visibility:"visible",position:"inherit",height:"auto",overflow:"inherit"}).trigger(a)}e.scrollTop(f.data("scroll-top")||0)}).exit(function(){if("visible"===f.css("visibility")){f.data("scroll-top",e.scrollTop());var a={type:"deactivate"};f.css({visibility:"hidden",position:"absolute",height:0,overflow:"hidden"}).trigger(a)}});f.data("path",h)}}}(window),function(a,b,c){"use strict";function d(a){function b(b){if(void 0===a)return"%"+b+"%";if("start"===a)return b+"%";if("end"===a)return"%"+b;throw"invalid position"}return{init:function(a,d,e,f,g){var h=c.observable(),i=d(),j=(e(),c.computed({read:h,write:function(a){i(b(a)),h(a)}}));return c.bindingHandlers.textInput.init(a,function(){return j},e,f,g)},update:c.bindingHandlers.textInput.update}}var e=a.metaproject||{};e.DataSource=function(a,d){var f=this;d=b.extend({key:"id"},d),b.extend(this,new e.EventEmitter),f.errorHandler=function(a,b,c){f.trigger("error",{message:a.responseText,code:a.status})},f._id=function(a){if("object"==typeof a){if(a.hasOwnProperty(d.key))return c.unwrap(a[d.key]);throw"Model key "+d.key+" not set!"}return a},f.get=function(c,d,e){switch((void 0===c||null===c)&&(c=""),typeof c){case"function":e=c,c="";break;case"string":"/"===c?c="":c.length>0&&"/"!==c[0]&&(c="/"+c);break;case"number":c="/"+c;break;default:e=d,d=c,c=""}return"function"==typeof d&&(e=d,d={}),b.ajax({url:a+c,data:d||{},dataType:"json",type:"GET",error:f.errorHandler,success:function(a){"function"==typeof e&&e(a)}})},f.post=function(d,e){return b.ajax({url:a,dataType:"text",contentType:"application/json",type:"POST",data:c.toJSON(d),success:function(a){f.trigger("changed",{action:"post",data:a}),"function"==typeof e&&e(a)},error:function(a,b,c){201==a.status?this.success(null,"Created",a):f.errorHandler.apply(this,arguments)}})},f.put=function(d,e,g){return"object"==typeof d&&("function"==typeof e&&(g=e),e=d,d=f._id(e)),b.ajax({url:a+"/"+f._id(d),dataType:"json",type:"PUT",contentType:"application/json",data:c.toJSON(e),success:function(a){f.trigger("changed",{action:"put",data:a}),"function"==typeof g&&g(a)},error:f.errorHandler})},f.destroy=function(c,d){return b.ajax({url:a+"/"+f._id(c),dataType:"text",type:"DELETE",success:function(a){f.trigger("changed",{action:"destroy",data:a}),"function"==typeof d&&d(a)},error:f.errorHandler})}},e.Model=function(a,d){a=a||{};var f=function(e){var f=this,g={};if(d=d||{},d.include=d.include||[],d.ignore=d.ignore||[],d.ignore.push("_links"),d.ignore.push("_embedded"),e=e||{},b.each(a,function(b,d){if("function"==typeof d)switch(d){case Date:void 0!==e[b]?e[b]=new Date(e[b]):e[b]=null;break;default:g[b]=c.computed({read:d,write:d,deferEvaluation:!0},f)}else void 0===e[b]&&(e[b]=a[b])}),e._embedded=e._embedded||a._embedded,e._embedded){var h=f._embedded={};b.each(e._embedded,function(d,e){e instanceof Array&&(a._links&&"function"==typeof a._links[d]?h[d]=c.observableArray(b.map(e,function(b){return new a._links[d](b)})):h[d]=c.mapping.fromJS(e,{copy:["_links"]}))})}e._links&&(f._links={},f._links.self=e._links.self||{href:null},b.each(e._links,function(h,i){if("self"!==h&&void 0===e[h]&&(void 0===f._embedded||void 0===f._embedded[h])){var j,k,l=c.observable(null);d.include.push(h),j=g[h]=c.computed({read:function(){return l()&&"object"==typeof l()._links&&l()._links.self?l()._links.self.href:null},write:function(a){return""===a?void l(null):void(!a||l()&&a===l()._links.self.href||b.ajax({url:a,dataType:"json",type:"GET",global:!1,success:function(a){k(a)},error:function(){k(null)}}))},deferEvaluation:!0}).extend({rateLimit:500}),k=f._links[h]=c.computed({read:l,write:function(b){b?(l(a._links&&"function"==typeof a._links[h]?new a._links[h](b):c.mapping.fromJS(b,{copy:["_links"]})),j(b._links&&b._links.self?b._links.self.href:null)):(l(null),j(null))},deferEvaluation:!0}),e._embedded&&e._embedded[h]?k(e._embedded[h]):i&&j(i.href)}})),c.mapping.fromJS(e,d,f),b.extend(f,g),f._changes=c.computed({read:function(){var a=c.toJS(this);return b.map(e,function(b,c){return"_links"!=c&&"_embedded"!=c&&b!=a[c]?c:void 0})}},f),f._changed=c.computed({read:function(){return this._changes().length>0}},f),f._reset=function(){b.each(e,function(a,b){c.isObservable(f[a])&&f[a](b)})}};f.mapper={create:function(a){return new f(a.data)}};var g=null;return f.getDataSource=function(){if(g)return g;throw"Model not bound to any DataSource"},f.bind=function(a,b){return"string"==typeof a?(void 0===b?b={model:f}:b.model=f,g=new e.DataSource(a,b)):g=a,f},f.create=function(a){return new f(a)},f.get=function(a,b,c){return"function"==typeof b&&(c=b,b={}),f.getDataSource().get(a,b,function(a){c(new f(a))})},f.on=function(a,b){return f.getDataSource().on(a,b)},f.changed=function(){return f.getDataSource().trigger("changed")},f.query=function(a,d){a=a||{};var e=f.getDataSource(),g=c.observable(a.search),h=c.observable(null),i=c.observable([]),j={page:c.observable(),size:c.observable(),sort:c.observable()};delete a.search,b.each(a,function(a,b){void 0===j[a]?j[a]=c.observable(b).extend({rateLimit:500}):j[a](b)});var k=c.computed({read:function(){var a=c.toJSON(j);if(h()!==a){var l=g()?"/search/"+g():"",m=c.toJS(j);k.loading(!0),e.get(l,m,function(c){h(a),"function"==typeof d?i(b.map(d.call(k,c),f.create)):"object"==typeof c.page&&void 0!==c.page.size?void 0!==c._embedded?(i(b.map(c._embedded[Object.keys(c._embedded)[0]],f.create)),void 0!==c.page&&(k.totalPages(c.page.totalPages),k.totalElements(c.page.totalElements),k.number(c.page.number))):i([]):i(b.map(c,f.create)),k.loading(!1)})}return i()},write:i,deferEvaluation:!0});return k.totalElements=c.observable(0),k.totalPages=c.observable(0),k.number=c.observable(0),k.loading=c.observable(!1),k.search=g,k.params=j,k.live=!0,k.reload=function(){h(null)},k.filter=function(a,b){void 0===j[a]?(j[a]=c.observable(b).extend({rateLimit:500}),k.reload()):j[a](b)},e.on("changed",function(){k.live&&k.reload()}),k},f.publish=function(a,b){return f.query(b).publishOn(a)},f.prototype.destroy=function(a){var b=this.toJS(),c=f.getDataSource();return c.destroy(c._id(b),a)},f.prototype.save=function(a){var b=this.toJS(),c=f.getDataSource(),d=c._id(b);return d?c.put(d,b,a):c.post(b,a)},f.prototype.toJS=function(){return c.mapping.toJS(this)},f.prototype.toJSON=function(){return c.mapping.toJSON(this)},f.prototype.post=function(a,c){return b.ajax({url:a,type:"POST",contentType:"application/json",dataType:"json",data:this.toJSON(),success:c,complete:this.changed})},f},c.bindingHandlers.like=d(),c.bindingHandlers.startsLike=d("start"),c.bindingHandlers.endsLike=d("end")}(window,jQuery,ko),function(a,b,c,d){"use strict";c.ui=c.ui||{},c.ui.Grid=function(a,c){var d=this;c=b.extend({},{columns:[],actions:[]},c),d.data=a,d.columns=c.columns,d.actions=c.actions},b.fn.alert=function(a,c){var d={level:a,block:!1,delay:250};b('<div class="alert-message '+d.level+(d.block?" block-message":"")+'" style="display: none;"><a class="close" href="#">×</a>'+c+"</div>").prependTo(this).fadeIn(d.delay)},b(document).on("click",".alert-message .close",function(a){a.preventDefault();var c=b(this).parent(".alert-message");c.fadeOut(250,function(){c.remove()})}),b.fn.info=function(a,b){this.alert("info",a)},b.fn.success=function(a){this.alert("success",a)},b.fn.warning=function(a){this.alert("warning",a)},b.fn.error=function(a){this.alert("error",a)},d.bindingHandlers.autocomplete={init:function(a,b,c,e){var f=jQuery(a),g=b();d.utils.domNodeDisposal.addDisposeCallback(a,function(){f.autocomplete("destroy")}),("string"==typeof g||"function"==typeof g||g instanceof Array)&&(g={source:g});var h=f.autocomplete(g).data("autocomplete");void 0!==g.renderItem&&(h._renderItem=g.renderItem),void 0!==g.renderMenu&&(h._renderMenu=g.renderMenu)}},d.bindingHandlers.dialog={init:function(a,b,c,e){var f=jQuery(a),g=b();d.utils.domNodeDisposal.addDisposeCallback(a,function(){f.dialog("destroy")}),jQuery.extend(g,{autoOpen:!1}),f.dialog(g)}},d.bindingHandlers.icon={init:function(a,b){var c='<span class="ui-icon ui-icon-'+b()+'"></span>';jQuery(a).prepend(c)}}}(window,jQuery,metaproject,ko),void 0!==jQuery.fn.fullCalendar&&function(a,b){"use strict";b.bindingHandlers.calendar={init:function(c,d,e){var f=c.getContext("2d"),g=new Chart(f);g._type=c.dataset.chart||"line",a(c).data("chart",g),b.bindingHandlers.chart.update(c,d,e)},update:function(c,d,e){var f=b.utils.unwrapObservable(d()),g=e().chartOptions,h=a(c).data("chart");switch(h._type){case"line":h.Line(f,g);break;case"bar":h.Bar(f,g);break;case"radar":h.Radar(f,g);break;case"polar":h.PolarArea(f,g);break;case"pie":h.Pie(f,g);break;case"doughnut":h.Doughnut(f,g);break;default:throw"invalid chart type"}}}}(jQuery,ko),void 0!==window.Chart&&function(a,b,c){"use strict";b.bindingHandlers.chart={init:function(d,e,f){var g=d.getContext("2d"),h=new c(g);h._type=d.dataset.chart||"line",a(d).data("chart",h),b.bindingHandlers.chart.update(d,e,f)},update:function(c,d,e){var f=b.utils.unwrapObservable(d()),g=e().chartOptions,h=a(c).data("chart");switch(h._type){case"line":h.Line(f,g);break;case"bar":h.Bar(f,g);break;case"radar":h.Radar(f,g);break;case"polar":h.PolarArea(f,g);break;case"pie":h.Pie(f,g);break;case"doughnut":h.Doughnut(f,g);break;default:throw"invalid chart type"}}}}(jQuery,ko,Chart),Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|after|from)/i,subtract:/^(\-|before|ago)/i,yesterday:/^yesterday/i,today:/^t(oday)?/i,tomorrow:/^tomorrow/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^min(ute)?s?/i,hour:/^h(ou)?rs?/i,week:/^w(ee)?k/i,month:/^m(o(nth)?s?)?/i,day:/^d(ays?)?/i,year:/^y((ea)?rs?)?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a|p)/i},abbreviatedTimeZoneStandard:{GMT:"-000",EST:"-0400",CST:"-0500",MST:"-0600",PST:"-0700"},abbreviatedTimeZoneDST:{GMT:"-000",EDT:"-0500",CDT:"-0600",MDT:"-0700",PDT:"-0800"}},Date.getMonthNumberFromName=function(a){for(var b=Date.CultureInfo.monthNames,c=Date.CultureInfo.abbreviatedMonthNames,d=a.toLowerCase(),e=0;e<b.length;e++)if(b[e].toLowerCase()==d||c[e].toLowerCase()==d)return e;return-1},Date.getDayNumberFromName=function(a){for(var b=Date.CultureInfo.dayNames,c=Date.CultureInfo.abbreviatedDayNames,d=(Date.CultureInfo.shortestDayNames,a.toLowerCase()),e=0;e<b.length;e++)if(b[e].toLowerCase()==d||c[e].toLowerCase()==d)return e;return-1},Date.isLeapYear=function(a){return a%4===0&&a%100!==0||a%400===0},Date.getDaysInMonth=function(a,b){return[31,Date.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]},Date.getTimezoneOffset=function(a,b){return b?Date.CultureInfo.abbreviatedTimeZoneDST[a.toUpperCase()]:Date.CultureInfo.abbreviatedTimeZoneStandard[a.toUpperCase()]},Date.getTimezoneAbbreviation=function(a,b){var c,d=b?Date.CultureInfo.abbreviatedTimeZoneDST:Date.CultureInfo.abbreviatedTimeZoneStandard;for(c in d)if(d[c]===a)return c;return null},Date.prototype.clone=function(){return new Date(this.getTime())},Date.prototype.compareTo=function(a){if(isNaN(this))throw new Error(this);if(a instanceof Date&&!isNaN(a))return this>a?1:a>this?-1:0;throw new TypeError(a)},Date.prototype.equals=function(a){return 0===this.compareTo(a)},Date.prototype.between=function(a,b){var c=this.getTime();return c>=a.getTime()&&c<=b.getTime()},Date.prototype.addMilliseconds=function(a){return this.setMilliseconds(this.getMilliseconds()+a),this},Date.prototype.addSeconds=function(a){return this.addMilliseconds(1e3*a)},Date.prototype.addMinutes=function(a){return this.addMilliseconds(6e4*a)},Date.prototype.addHours=function(a){return this.addMilliseconds(36e5*a)},Date.prototype.addDays=function(a){return this.addMilliseconds(864e5*a)},Date.prototype.addWeeks=function(a){return this.addMilliseconds(6048e5*a)},Date.prototype.addMonths=function(a){var b=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+a),this.setDate(Math.min(b,this.getDaysInMonth())),this},Date.prototype.addYears=function(a){return this.addMonths(12*a)},Date.prototype.add=function(a){if("number"==typeof a)return this._orient=a,this;var b=a;return(b.millisecond||b.milliseconds)&&this.addMilliseconds(b.millisecond||b.milliseconds),(b.second||b.seconds)&&this.addSeconds(b.second||b.seconds),(b.minute||b.minutes)&&this.addMinutes(b.minute||b.minutes),(b.hour||b.hours)&&this.addHours(b.hour||b.hours),(b.month||b.months)&&this.addMonths(b.month||b.months),(b.year||b.years)&&this.addYears(b.year||b.years),(b.day||b.days)&&this.addDays(b.day||b.days),this},Date._validate=function(a,b,c,d){if("number"!=typeof a)throw new TypeError(a+" is not a Number.");if(b>a||a>c)throw new RangeError(a+" is not a valid value for "+d+".");return!0},Date.validateMillisecond=function(a){return Date._validate(a,0,999,"milliseconds")},Date.validateSecond=function(a){return Date._validate(a,0,59,"seconds")},Date.validateMinute=function(a){return Date._validate(a,0,59,"minutes")},Date.validateHour=function(a){return Date._validate(a,0,23,"hours")},Date.validateDay=function(a,b,c){return Date._validate(a,1,Date.getDaysInMonth(b,c),"days")},Date.validateMonth=function(a){return Date._validate(a,0,11,"months")},Date.validateYear=function(a){return Date._validate(a,1,9999,"seconds")},Date.prototype.set=function(a){var b=a;return b.millisecond||0===b.millisecond||(b.millisecond=-1),b.second||0===b.second||(b.second=-1),b.minute||0===b.minute||(b.minute=-1),b.hour||0===b.hour||(b.hour=-1),b.day||0===b.day||(b.day=-1),b.month||0===b.month||(b.month=-1),b.year||0===b.year||(b.year=-1),-1!=b.millisecond&&Date.validateMillisecond(b.millisecond)&&this.addMilliseconds(b.millisecond-this.getMilliseconds()),-1!=b.second&&Date.validateSecond(b.second)&&this.addSeconds(b.second-this.getSeconds()),-1!=b.minute&&Date.validateMinute(b.minute)&&this.addMinutes(b.minute-this.getMinutes()),-1!=b.hour&&Date.validateHour(b.hour)&&this.addHours(b.hour-this.getHours()),-1!==b.month&&Date.validateMonth(b.month)&&this.addMonths(b.month-this.getMonth()),-1!=b.year&&Date.validateYear(b.year)&&this.addYears(b.year-this.getFullYear()),-1!=b.day&&Date.validateDay(b.day,this.getFullYear(),this.getMonth())&&this.addDays(b.day-this.getDate()),b.timezone&&this.setTimezone(b.timezone),b.timezoneOffset&&this.setTimezoneOffset(b.timezoneOffset),this},Date.prototype.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this},Date.prototype.isLeapYear=function(){var a=this.getFullYear();return a%4===0&&a%100!==0||a%400===0},Date.prototype.isWeekday=function(){return!(this.is().sat()||this.is().sun())},Date.prototype.getDaysInMonth=function(){return Date.getDaysInMonth(this.getFullYear(),this.getMonth())},Date.prototype.moveToFirstDayOfMonth=function(){return this.set({day:1})},Date.prototype.moveToLastDayOfMonth=function(){return this.set({day:this.getDaysInMonth()})},Date.prototype.moveToDayOfWeek=function(a,b){var c=(a-this.getDay()+7*(b||1))%7;return this.addDays(0===c?c+=7*(b||1):c)},Date.prototype.moveToMonth=function(a,b){var c=(a-this.getMonth()+12*(b||1))%12;return this.addMonths(0===c?c+=12*(b||1):c)},Date.prototype.getDayOfYear=function(){return Math.floor((this-new Date(this.getFullYear(),0,1))/864e5)},Date.prototype.getWeekOfYear=function(a){var b=this.getFullYear(),c=this.getMonth(),d=this.getDate(),e=a||Date.CultureInfo.firstDayOfWeek,f=8-new Date(b,0,1).getDay();8==f&&(f=1);var g=(Date.UTC(b,c,d,0,0,0)-Date.UTC(b,0,1,0,0,0))/864e5+1,h=Math.floor((g-f+7)/7);if(h===e){b--;var i=8-new Date(b,0,1).getDay();h=2==i||8==i?53:52}return h},Date.prototype.isDST=function(){return"D"==this.toString().match(/(E|C|M|P)(S|D)T/)[2]},Date.prototype.getTimezone=function(){return Date.getTimezoneAbbreviation(this.getUTCOffset,this.isDST())},Date.prototype.setTimezoneOffset=function(a){var b=this.getTimezoneOffset(),c=-6*Number(a)/10;return this.addMinutes(c-b),this},Date.prototype.setTimezone=function(a){return this.setTimezoneOffset(Date.getTimezoneOffset(a))},Date.prototype.getUTCOffset=function(){var a,b=-10*this.getTimezoneOffset()/6;return 0>b?(a=(b-1e4).toString(),a[0]+a.substr(2)):(a=(b+1e4).toString(),"+"+a.substr(1))},Date.prototype.getDayName=function(a){return a?Date.CultureInfo.abbreviatedDayNames[this.getDay()]:Date.CultureInfo.dayNames[this.getDay()]},Date.prototype.getMonthName=function(a){return a?Date.CultureInfo.abbreviatedMonthNames[this.getMonth()]:Date.CultureInfo.monthNames[this.getMonth()]},Date.prototype._toString=Date.prototype.toString,Date.prototype.toString=function(a){var b=this,c=function(a){return 1==a.toString().length?"0"+a:a};return a?a.replace(/dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?/g,function(a){switch(a){case"hh":return c(b.getHours()<13?b.getHours():b.getHours()-12);case"h":return b.getHours()<13?b.getHours():b.getHours()-12;case"HH":return c(b.getHours());case"H":return b.getHours();case"mm":return c(b.getMinutes());case"m":return b.getMinutes();case"ss":return c(b.getSeconds());case"s":return b.getSeconds();case"yyyy":return b.getFullYear();case"yy":return b.getFullYear().toString().substring(2,4);case"dddd":return b.getDayName();case"ddd":return b.getDayName(!0);case"dd":return c(b.getDate());case"d":return b.getDate().toString();case"MMMM":return b.getMonthName();case"MMM":return b.getMonthName(!0);case"MM":return c(b.getMonth()+1);case"M":return b.getMonth()+1;case"t":return b.getHours()<12?Date.CultureInfo.amDesignator.substring(0,1):Date.CultureInfo.pmDesignator.substring(0,1);case"tt":return b.getHours()<12?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator;case"zzz":case"zz":case"z":return""}}):this._toString()},Date.now=function(){return new Date},Date.today=function(){return Date.now().clearTime()},Date.prototype._orient=1,Date.prototype.next=function(){return this._orient=1,this},Date.prototype.last=Date.prototype.prev=Date.prototype.previous=function(){return this._orient=-1,this},Date.prototype._is=!1,Date.prototype.is=function(){return this._is=!0,this},Number.prototype._dateElement="day",Number.prototype.fromNow=function(){var a={};return a[this._dateElement]=this,Date.now().add(a)},Number.prototype.ago=function(){var a={};return a[this._dateElement]=-1*this,Date.now().add(a)},function(){for(var a,b=Date.prototype,c=Number.prototype,d="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),e="january february march april may june july august september october november december".split(/\s/),f="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),g=function(a){return function(){return this._is?(this._is=!1,this.getDay()==a):this.moveToDayOfWeek(a,this._orient)}},h=0;h<d.length;h++)b[d[h]]=b[d[h].substring(0,3)]=g(h);for(var i=function(a){return function(){return this._is?(this._is=!1,this.getMonth()===a):this.moveToMonth(a,this._orient)}},j=0;j<e.length;j++)b[e[j]]=b[e[j].substring(0,3)]=i(j);for(var k=function(a){return function(){return"s"!=a.substring(a.length-1)&&(a+="s"),this["add"+a](this._orient)}},l=function(a){return function(){return this._dateElement=a,this}},m=0;m<f.length;m++)a=f[m].toLowerCase(),b[a]=b[a+"s"]=k(f[m]),c[a]=c[a+"s"]=l(a)}(),Date.prototype.toJSONString=function(){return this.toString("yyyy-MM-ddThh:mm:ssZ")},Date.prototype.toShortDateString=function(){return this.toString(Date.CultureInfo.formatPatterns.shortDatePattern)},Date.prototype.toLongDateString=function(){return this.toString(Date.CultureInfo.formatPatterns.longDatePattern)},Date.prototype.toShortTimeString=function(){return this.toString(Date.CultureInfo.formatPatterns.shortTimePattern)},Date.prototype.toLongTimeString=function(){return this.toString(Date.CultureInfo.formatPatterns.longTimePattern)},Date.prototype.getOrdinal=function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},function(){Date.Parsing={Exception:function(a){this.message="Parse error at '"+a.substring(0,10)+" ...'"}};for(var a=Date.Parsing,b=a.Operators={rtoken:function(b){return function(c){var d=c.match(b);if(d)return[d[0],c.substring(d[0].length)];throw new a.Exception(c)}},token:function(a){return function(a){return b.rtoken(new RegExp("^s*"+a+"s*"))(a)}},stoken:function(a){return b.rtoken(new RegExp("^"+a))},until:function(a){return function(b){for(var c=[],d=null;b.length;){try{d=a.call(this,b)}catch(e){c.push(d[0]),b=d[1];continue}break}return[c,b]}},many:function(a){return function(b){for(var c=[],d=null;b.length;){try{d=a.call(this,b)}catch(e){return[c,b]}c.push(d[0]),b=d[1]}return[c,b]}},optional:function(a){return function(b){var c=null;try{c=a.call(this,b)}catch(d){return[null,b]}return[c[0],c[1]]}},not:function(b){return function(c){try{b.call(this,c)}catch(d){return[null,c]}throw new a.Exception(c)}},ignore:function(a){return a?function(b){var c=null;return c=a.call(this,b),[null,c[1]]}:null},product:function(){for(var a=arguments[0],c=Array.prototype.slice.call(arguments,1),d=[],e=0;e<a.length;e++)d.push(b.each(a[e],c));return d},cache:function(b){var c={},d=null;return function(e){try{d=c[e]=c[e]||b.call(this,e)}catch(f){d=c[e]=f}if(d instanceof a.Exception)throw d;return d}},any:function(){var b=arguments;return function(c){for(var d=null,e=0;e<b.length;e++)if(null!=b[e]){try{d=b[e].call(this,c)}catch(f){d=null}if(d)return d}throw new a.Exception(c)}},each:function(){var b=arguments;return function(c){for(var d=[],e=null,f=0;f<b.length;f++)if(null!=b[f]){try{e=b[f].call(this,c)}catch(g){throw new a.Exception(c)}d.push(e[0]),c=e[1]}return[d,c]}},all:function(){var a=arguments,b=b;return b.each(b.optional(a))},sequence:function(c,d,e){return d=d||b.rtoken(/^\s*/),e=e||null,1==c.length?c[0]:function(b){for(var f=null,g=null,h=[],i=0;i<c.length;i++){try{f=c[i].call(this,b)}catch(j){break}h.push(f[0]);try{g=d.call(this,f[1])}catch(k){g=null;break}b=g[1]}if(!f)throw new a.Exception(b);if(g)throw new a.Exception(g[1]);if(e)try{f=e.call(this,f[1])}catch(l){throw new a.Exception(f[1])}return[h,f?f[1]:b]}},between:function(a,c,d){d=d||a;var e=b.each(b.ignore(a),c,b.ignore(d));return function(a){var b=e.call(this,a);return[[b[0][0],r[0][2]],b[1]]}},list:function(a,c,d){return c=c||b.rtoken(/^\s*/),d=d||null,a instanceof Array?b.each(b.product(a.slice(0,-1),b.ignore(c)),a.slice(-1),b.ignore(d)):b.each(b.many(b.each(a,b.ignore(c))),px,b.ignore(d))},set:function(c,d,e){return d=d||b.rtoken(/^\s*/),e=e||null,function(f){for(var g=null,h=null,i=null,j=null,k=[[],f],l=!1,m=0;m<c.length;m++){i=null,h=null,g=null,l=1==c.length;try{g=c[m].call(this,f)}catch(n){continue}if(j=[[g[0]],g[1]],g[1].length>0&&!l)try{i=d.call(this,g[1])}catch(o){l=!0}else l=!0;if(l||0!==i[1].length||(l=!0),!l){for(var p=[],q=0;q<c.length;q++)m!=q&&p.push(c[q]);h=b.set(p,d).call(this,i[1]),h[0].length>0&&(j[0]=j[0].concat(h[0]),j[1]=h[1])}if(j[1].length<k[1].length&&(k=j),0===k[1].length)break}if(0===k[0].length)return k;if(e){try{i=e.call(this,k[1])}catch(r){throw new a.Exception(k[1])}k[1]=i[1]}return k}},forward:function(a,b){return function(c){return a[b].call(this,c)}},replace:function(a,b){return function(c){var d=a.call(this,c);return[b,d[1]]}},process:function(a,b){return function(c){var d=a.call(this,c);return[b.call(this,d[0]),d[1]]}},min:function(b,c){return function(d){var e=c.call(this,d);if(e[0].length<b)throw new a.Exception(d);return e}}},c=function(a){return function(){var b=null,c=[];if(arguments.length>1?b=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&(b=arguments[0]),!b)return a.apply(null,arguments);for(var d=0,e=b.shift();d<e.length;d++)return b.unshift(e[d]),c.push(a.apply(null,b)),b.shift(),c}},d="optional not ignore cache".split(/\s/),e=0;e<d.length;e++)b[d[e]]=c(b[d[e]]);for(var f=function(a){return function(){return arguments[0]instanceof Array?a.apply(null,arguments[0]):a.apply(null,arguments)}},g="each any all".split(/\s/),h=0;h<g.length;h++)b[g[h]]=f(b[g[h]])}(),function(){var a=function(b){for(var c=[],d=0;d<b.length;d++)b[d]instanceof Array?c=c.concat(a(b[d])):b[d]&&c.push(b[d]);return c};Date.Grammar={},Date.Translator={hour:function(a){return function(){this.hour=Number(a)}},minute:function(a){return function(){this.minute=Number(a)}},second:function(a){return function(){this.second=Number(a)}},meridian:function(a){return function(){this.meridian=a.slice(0,1).toLowerCase()}},timezone:function(a){return function(){var b=a.replace(/[^\d\+\-]/g,"");b.length?this.timezoneOffset=Number(b):this.timezone=a.toLowerCase()}},day:function(a){var b=a[0];return function(){this.day=Number(b.match(/\d+/)[0])}},month:function(a){return function(){this.month=3==a.length?Date.getMonthNumberFromName(a):Number(a)-1}},year:function(a){return function(){var b=Number(a);this.year=a.length>2?b:b+(b+2e3<Date.CultureInfo.twoDigitYearMax?2e3:1900)}},rday:function(a){return function(){switch(a){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0,this.now=!0}}},finishExact:function(a){a=a instanceof Array?a:[a];var b=new Date;this.year=b.getFullYear(),this.month=b.getMonth(),this.day=1,this.hour=0,this.minute=0,this.second=0;for(var c=0;c<a.length;c++)a[c]&&a[c].call(this);if(this.hour="p"==this.meridian&&this.hour<13?this.hour+12:this.hour,this.day>Date.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");var d=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);return this.timezone?d.set({timezone:this.timezone}):this.timezoneOffset&&d.set({timezoneOffset:this.timezoneOffset}),d},finish:function(b){if(b=b instanceof Array?a(b):[b],0===b.length)return null;for(var c=0;c<b.length;c++)"function"==typeof b[c]&&b[c].call(this);if(this.now)return new Date;var d=Date.today(),e=!(null==this.days&&!this.orient&&!this.operator);if(e){var f,g,h;return h="past"==this.orient||"subtract"==this.operator?-1:1,
this.weekday&&(this.unit="day",f=Date.getDayNumberFromName(this.weekday)-d.getDay(),g=7,this.days=f?(f+h*g)%g:h*g),this.month&&(this.unit="month",f=this.month-d.getMonth(),g=12,this.months=f?(f+h*g)%g:h*g,this.month=null),this.unit||(this.unit="day"),(null==this[this.unit+"s"]||null!=this.operator)&&(this.value||(this.value=1),"week"==this.unit&&(this.unit="day",this.value=7*this.value),this[this.unit+"s"]=this.value*h),d.add(this)}return this.meridian&&this.hour&&(this.hour=this.hour<13&&"p"==this.meridian?this.hour+12:this.hour),this.weekday&&!this.day&&(this.day=d.addDays(Date.getDayNumberFromName(this.weekday)-d.getDay()).getDate()),this.month&&!this.day&&(this.day=1),d.set(this)}};var b,c=Date.Parsing.Operators,d=Date.Grammar,e=Date.Translator;d.datePartDelimiter=c.rtoken(/^([\s\-\.\,\/\x27]+)/),d.timePartDelimiter=c.stoken(":"),d.whiteSpace=c.rtoken(/^\s*/),d.generalDelimiter=c.rtoken(/^(([\s\,]|at|on)+)/);var f={};d.ctoken=function(a){var b=f[a];if(!b){for(var d=Date.CultureInfo.regexPatterns,e=a.split(/\s+/),g=[],h=0;h<e.length;h++)g.push(c.replace(c.rtoken(d[e[h]]),e[h]));b=f[a]=c.any.apply(null,g)}return b},d.ctoken2=function(a){return c.rtoken(Date.CultureInfo.regexPatterns[a])},d.h=c.cache(c.process(c.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),e.hour)),d.hh=c.cache(c.process(c.rtoken(/^(0[0-9]|1[0-2])/),e.hour)),d.H=c.cache(c.process(c.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),e.hour)),d.HH=c.cache(c.process(c.rtoken(/^([0-1][0-9]|2[0-3])/),e.hour)),d.m=c.cache(c.process(c.rtoken(/^([0-5][0-9]|[0-9])/),e.minute)),d.mm=c.cache(c.process(c.rtoken(/^[0-5][0-9]/),e.minute)),d.s=c.cache(c.process(c.rtoken(/^([0-5][0-9]|[0-9])/),e.second)),d.ss=c.cache(c.process(c.rtoken(/^[0-5][0-9]/),e.second)),d.hms=c.cache(c.sequence([d.H,d.mm,d.ss],d.timePartDelimiter)),d.t=c.cache(c.process(d.ctoken2("shortMeridian"),e.meridian)),d.tt=c.cache(c.process(d.ctoken2("longMeridian"),e.meridian)),d.z=c.cache(c.process(c.rtoken(/^(\+|\-)?\s*\d\d\d\d?/),e.timezone)),d.zz=c.cache(c.process(c.rtoken(/^(\+|\-)\s*\d\d\d\d/),e.timezone)),d.zzz=c.cache(c.process(d.ctoken2("timezone"),e.timezone)),d.timeSuffix=c.each(c.ignore(d.whiteSpace),c.set([d.tt,d.zzz])),d.time=c.each(c.optional(c.ignore(c.stoken("T"))),d.hms,d.timeSuffix),d.d=c.cache(c.process(c.each(c.rtoken(/^([0-2]\d|3[0-1]|\d)/),c.optional(d.ctoken2("ordinalSuffix"))),e.day)),d.dd=c.cache(c.process(c.each(c.rtoken(/^([0-2]\d|3[0-1])/),c.optional(d.ctoken2("ordinalSuffix"))),e.day)),d.ddd=d.dddd=c.cache(c.process(d.ctoken("sun mon tue wed thu fri sat"),function(a){return function(){this.weekday=a}})),d.M=c.cache(c.process(c.rtoken(/^(1[0-2]|0\d|\d)/),e.month)),d.MM=c.cache(c.process(c.rtoken(/^(1[0-2]|0\d)/),e.month)),d.MMM=d.MMMM=c.cache(c.process(d.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),e.month)),d.y=c.cache(c.process(c.rtoken(/^(\d\d?)/),e.year)),d.yy=c.cache(c.process(c.rtoken(/^(\d\d)/),e.year)),d.yyy=c.cache(c.process(c.rtoken(/^(\d\d?\d?\d?)/),e.year)),d.yyyy=c.cache(c.process(c.rtoken(/^(\d\d\d\d)/),e.year)),b=function(){return c.each(c.any.apply(null,arguments),c.not(d.ctoken2("timeContext")))},d.day=b(d.d,d.dd),d.month=b(d.M,d.MMM),d.year=b(d.yyyy,d.yy),d.orientation=c.process(d.ctoken("past future"),function(a){return function(){this.orient=a}}),d.operator=c.process(d.ctoken("add subtract"),function(a){return function(){this.operator=a}}),d.rday=c.process(d.ctoken("yesterday tomorrow today now"),e.rday),d.unit=c.process(d.ctoken("minute hour day week month year"),function(a){return function(){this.unit=a}}),d.value=c.process(c.rtoken(/^\d\d?(st|nd|rd|th)?/),function(a){return function(){this.value=a.replace(/\D/g,"")}}),d.expression=c.set([d.rday,d.operator,d.value,d.unit,d.orientation,d.ddd,d.MMM]),b=function(){return c.set(arguments,d.datePartDelimiter)},d.mdy=b(d.ddd,d.month,d.day,d.year),d.ymd=b(d.ddd,d.year,d.month,d.day),d.dmy=b(d.ddd,d.day,d.month,d.year),d.date=function(a){return(d[Date.CultureInfo.dateElementOrder]||d.mdy).call(this,a)},d.format=c.process(c.many(c.any(c.process(c.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(a){if(d[a])return d[a];throw Date.Parsing.Exception(a)}),c.process(c.rtoken(/^[^dMyhHmstz]+/),function(a){return c.ignore(c.stoken(a))}))),function(a){return c.process(c.each.apply(null,a),e.finishExact)});var g={},h=function(a){return g[a]=g[a]||d.format(a)[0]};d.formats=function(a){if(a instanceof Array){for(var b=[],d=0;d<a.length;d++)b.push(h(a[d]));return c.any.apply(null,b)}return h(a)},d._formats=d.formats(["yyyy-MM-ddTHH:mm:ss","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","d"]),d._start=c.process(c.set([d.date,d.time,d.expression],d.generalDelimiter,d.whiteSpace),e.finish),d.start=function(a){try{var b=d._formats.call({},a);if(0===b[1].length)return b}catch(c){}return d._start.call({},a)}}(),Date._parse=Date.parse,Date.parse=function(a){var b=null;if(!a)return null;try{b=Date.Grammar.start.call({},a)}catch(c){return null}return 0===b[1].length?b[0]:null},Date.getParseFunction=function(a){var b=Date.Grammar.formats(a);return function(a){var c=null;try{c=b.call({},a)}catch(d){return null}return 0===c[1].length?c[0]:null}},Date.parseExact=function(a,b){return Date.getParseFunction(b)(a)};var TimeSpan=function(a,b,c,d,e){for(var f="days hours minutes seconds milliseconds".split(/\s+/),g=function(a){return function(){return this[a]}},h=function(a){return function(b){return this[a]=b,this}},i=0;i<f.length;i++){var j=f[i],k=j.slice(0,1).toUpperCase()+j.slice(1);TimeSpan.prototype[j]=0,TimeSpan.prototype["get"+k]=g(j),TimeSpan.prototype["set"+k]=h(j)}if(4==arguments.length)this.setDays(a),this.setHours(b),this.setMinutes(c),this.setSeconds(d);else if(5==arguments.length)this.setDays(a),this.setHours(b),this.setMinutes(c),this.setSeconds(d),this.setMilliseconds(e);else if(1==arguments.length&&"number"==typeof a){var l=0>a?-1:1;this.setMilliseconds(Math.abs(a)),this.setDays(Math.floor(this.getMilliseconds()/864e5)*l),this.setMilliseconds(this.getMilliseconds()%864e5),this.setHours(Math.floor(this.getMilliseconds()/36e5)*l),this.setMilliseconds(this.getMilliseconds()%36e5),this.setMinutes(Math.floor(this.getMilliseconds()/6e4)*l),this.setMilliseconds(this.getMilliseconds()%6e4),this.setSeconds(Math.floor(this.getMilliseconds()/1e3)*l),this.setMilliseconds(this.getMilliseconds()%1e3),this.setMilliseconds(this.getMilliseconds()*l)}return this.getTotalMilliseconds=function(){return 864e5*this.getDays()+36e5*this.getHours()+6e4*this.getMinutes()+1e3*this.getSeconds()},this.compareTo=function(a){var b,c=new Date(1970,1,1,this.getHours(),this.getMinutes(),this.getSeconds());return b=null===a?new Date(1970,1,1,0,0,0):new Date(1970,1,1,a.getHours(),a.getMinutes(),a.getSeconds()),b>c?-1:c>b?1:0},this.equals=function(a){return 0===this.compareTo(a)},this.add=function(a){return null===a?this:this.addSeconds(a.getTotalMilliseconds()/1e3)},this.subtract=function(a){return null===a?this:this.addSeconds(-a.getTotalMilliseconds()/1e3)},this.addDays=function(a){return new TimeSpan(this.getTotalMilliseconds()+864e5*a)},this.addHours=function(a){return new TimeSpan(this.getTotalMilliseconds()+36e5*a)},this.addMinutes=function(a){return new TimeSpan(this.getTotalMilliseconds()+6e4*a)},this.addSeconds=function(a){return new TimeSpan(this.getTotalMilliseconds()+1e3*a)},this.addMilliseconds=function(a){return new TimeSpan(this.getTotalMilliseconds()+a)},this.get12HourHour=function(){return this.getHours()>12?this.getHours()-12:0===this.getHours()?12:this.getHours()},this.getDesignator=function(){return this.getHours()<12?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator},this.toString=function(a){this._toString=function(){return null!==this.getDays()&&this.getDays()>0?this.getDays()+"."+this.getHours()+":"+this.p(this.getMinutes())+":"+this.p(this.getSeconds()):this.getHours()+":"+this.p(this.getMinutes())+":"+this.p(this.getSeconds())},this.p=function(a){return a.toString().length<2?"0"+a:a};var b=this;return a?a.replace(/dd?|HH?|hh?|mm?|ss?|tt?/g,function(a){switch(a){case"d":return b.getDays();case"dd":return b.p(b.getDays());case"H":return b.getHours();case"HH":return b.p(b.getHours());case"h":return b.get12HourHour();case"hh":return b.p(b.get12HourHour());case"m":return b.getMinutes();case"mm":return b.p(b.getMinutes());case"s":return b.getSeconds();case"ss":return b.p(b.getSeconds());case"t":return(b.getHours()<12?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator).substring(0,1);case"tt":return b.getHours()<12?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator}}):this._toString()},this};Date.prototype.getTimeOfDay=function(){return new TimeSpan(0,this.getHours(),this.getMinutes(),this.getSeconds(),this.getMilliseconds())};var TimePeriod=function(a,b,c,d,e,f,g){for(var h="years months days hours minutes seconds milliseconds".split(/\s+/),i=function(a){return function(){return this[a]}},j=function(a){return function(b){return this[a]=b,this}},k=0;k<h.length;k++){var l=h[k],m=l.slice(0,1).toUpperCase()+l.slice(1);TimePeriod.prototype[l]=0,TimePeriod.prototype["get"+m]=i(l),TimePeriod.prototype["set"+m]=j(l)}if(7==arguments.length)this.years=a,this.months=b,this.setDays(c),this.setHours(d),this.setMinutes(e),this.setSeconds(f),this.setMilliseconds(g);else if(2==arguments.length&&arguments[0]instanceof Date&&arguments[1]instanceof Date){var n=a.clone(),o=b.clone(),p=n.clone(),q=n>o?-1:1;if(this.years=o.getFullYear()-n.getFullYear(),p.addYears(this.years),1==q?p>o&&0!==this.years&&this.years--:o>p&&0!==this.years&&this.years++,n.addYears(this.years),1==q)for(;o>n&&n.clone().addDays(Date.getDaysInMonth(n.getYear(),n.getMonth()))<o;)n.addMonths(1),this.months++;else for(;n>o&&n.clone().addDays(-n.getDaysInMonth())>o;)n.addMonths(-1),this.months--;var r=o-n;if(0!==r){var s=new TimeSpan(r);this.setDays(s.getDays()),this.setHours(s.getHours()),this.setMinutes(s.getMinutes()),this.setSeconds(s.getSeconds()),this.setMilliseconds(s.getMilliseconds())}}return this};!function(a){a.fn.daterangepicker=function(b){function c(b){if(!b.getDate())return"";var c=(b.getDate(),b.getMonth());b.getFullYear();c++;var d=j.dateFormat;return a.datepicker.formatDate(d,b)}function d(){"closed"==p.data("state")&&(g(),p.fadeIn(300).data("state","open"),j.onOpen())}function e(){"open"==p.data("state")&&(p.fadeOut(300).data("state","closed"),j.onClose())}function f(){"open"==p.data("state")?e():d()}function g(){var b=u||i,c=b.offset(),d="left",e=c.left,f=a(window).width()-e-b.outerWidth();e>f&&(d="right",e=f),p.parent().css(d,e).css("top",c.top+b.outerHeight())}function h(a,b,c,d){if(a.is(".ui-daterangepicker-specificDate"))d.hide(),c.show(),b.find(".title-start").text(j.presets.specificDate),b.find(".range-start").restoreDateFromData().css("opacity",1).show(400),b.find(".range-end").restoreDateFromData().css("opacity",0).hide(400),setTimeout(function(){d.fadeIn()},400);else if(a.is(".ui-daterangepicker-allDatesBefore"))d.hide(),c.show(),b.find(".title-end").text(j.presets.allDatesBefore),b.find(".range-start").saveDateToData().datepicker("setDate",j.earliestDate).css("opacity",0).hide(400),b.find(".range-end").restoreDateFromData().css("opacity",1).show(400),setTimeout(function(){d.fadeIn()},400);else if(a.is(".ui-daterangepicker-allDatesAfter"))d.hide(),c.show(),b.find(".title-start").text(j.presets.allDatesAfter),b.find(".range-start").restoreDateFromData().css("opacity",1).show(400),b.find(".range-end").saveDateToData().datepicker("setDate",j.latestDate).css("opacity",0).hide(400),setTimeout(function(){d.fadeIn()},400);else if(a.is(".ui-daterangepicker-dateRange"))d.hide(),c.show(),b.find(".title-start").text(j.rangeStartTitle),b.find(".title-end").text(j.rangeEndTitle),b.find(".range-start").restoreDateFromData().css("opacity",1).show(400),b.find(".range-end").restoreDateFromData().css("opacity",1).show(400),setTimeout(function(){d.fadeIn()},400);else{d.hide(),b.find(".range-start, .range-end").css("opacity",0).hide(400,function(){c.hide()});var e="string"==typeof a.data("dateStart")?Date.parse(a.data("dateStart")):a.data("dateStart")(),f="string"==typeof a.data("dateEnd")?Date.parse(a.data("dateEnd")):a.data("dateEnd")();b.find(".range-start").datepicker("setDate",e).find(".ui-datepicker-current-day").trigger("click"),b.find(".range-end").datepicker("setDate",f).find(".ui-datepicker-current-day").trigger("click")}return!1}var i=a(this),j=a.extend({presetRanges:[{text:"Today",dateStart:"today",dateEnd:"today"},{text:"Last 7 days",dateStart:"today-7days",dateEnd:"today"},{text:"Month to date",dateStart:function(){return Date.parse("today").moveToFirstDayOfMonth()},dateEnd:"today"},{text:"Year to date",dateStart:function(){var a=Date.parse("today");return a.setMonth(0),a.setDate(1),a},dateEnd:"today"},{text:"The previous Month",dateStart:function(){return Date.parse("1 month ago").moveToFirstDayOfMonth()},dateEnd:function(){return Date.parse("1 month ago").moveToLastDayOfMonth()}}],presets:{specificDate:"Specific Date",allDatesBefore:"All Dates Before",allDatesAfter:"All Dates After",dateRange:"Date Range"},rangeStartTitle:"Start date",rangeEndTitle:"End date",nextLinkText:$.datepicker._defaults.nextText,prevLinkText:$.datepicker._defaults.prevText,doneButtonText:"Done",earliestDate:Date.parse("-15years"),latestDate:Date.parse("today"),constrainDates:!1,rangeSplitter:"-",dateFormat:$.datepicker._defaults.dateFormat,closeOnSelect:!0,arrows:!1,appendTo:"body",onClose:function(){},onOpen:function(){},onChange:function(){},datepickerOptions:null},b),k={onSelect:function(a,b){p.find(".ui-daterangepicker-specificDate").is(".ui-state-active")&&p.find(".range-end").datepicker("setDate",p.find(".range-start").datepicker("getDate")),$(this).trigger("constrainOtherPicker");var d=c(p.find(".range-start").datepicker("getDate")),f=c(p.find(".range-end").datepicker("getDate"));2==i.length?(i.eq(0).val(d),i.eq(1).val(f)):i.val(d!=f?d+" "+j.rangeSplitter+" "+f:d),j.closeOnSelect&&(p.find("li.ui-state-active").is(".ui-daterangepicker-dateRange")||p.is(":animated")||e()),j.onChange()},defaultDate:0};i.bind("change",j.onChange),j.datepickerOptions=b?a.extend(k,b.datepickerOptions):k;var l,m,n,o=Date.parse("today");2==i.size()?(m=Date.parse(i.eq(0).val()),n=Date.parse(i.eq(1).val()),null==m&&(m=n),null==n&&(n=m)):(m=Date.parse(i.val().split(j.rangeSplitter)[0]),n=Date.parse(i.val().split(j.rangeSplitter)[1]),null==n&&(n=m)),null!=m&&(l=m),null!=n&&(o=n);var p=a('<div class="ui-daterangepicker ui-widget ui-helper-clearfix ui-widget-content ui-corner-all"></div>');(function(){var b=a('<ul class="ui-widget-content"></ul>').appendTo(p);a.each(j.presetRanges,function(){a('<li class="ui-daterangepicker-'+this.text.replace(/ /g,"")+' ui-corner-all"><a href="#">'+this.text+"</a></li>").data("dateStart",this.dateStart).data("dateEnd",this.dateEnd).appendTo(b)});var c=0;return a.each(j.presets,function(d,e){a('<li class="ui-daterangepicker-'+d+" preset_"+c+' ui-helper-clearfix ui-corner-all"><span class="ui-icon ui-icon-triangle-1-e"></span><a href="#">'+e+"</a></li>").appendTo(b),c++}),b.find("li").hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}).click(function(){return p.find(".ui-state-active").removeClass("ui-state-active"),a(this).addClass("ui-state-active"),h(a(this),p,q,r),!1}),b})();a.fn.restoreDateFromData=function(){return a(this).data("saveDate")&&a(this).datepicker("setDate",a(this).data("saveDate")).removeData("saveDate"),this},a.fn.saveDateToData=function(){return a(this).data("saveDate")||a(this).data("saveDate",a(this).datepicker("getDate")),this};var q=a('<div class="ranges ui-widget-header ui-corner-all ui-helper-clearfix"><div class="range-start"><span class="title-start">Start Date</span></div><div class="range-end"><span class="title-end">End Date</span></div></div>').appendTo(p);q.find(".range-start, .range-end").datepicker(j.datepickerOptions),q.find(".range-start").datepicker("setDate",l),q.find(".range-end").datepicker("setDate",o),q.find(".range-start, .range-end").bind("constrainOtherPicker",function(){j.constrainDates&&($(this).is(".range-start")?p.find(".range-end").datepicker("option","minDate",$(this).datepicker("getDate")):p.find(".range-start").datepicker("option","maxDate",$(this).datepicker("getDate")))}).trigger("constrainOtherPicker");var r=a('<button class="btnDone ui-state-default ui-corner-all">'+j.doneButtonText+"</button>").click(function(){p.find(".ui-datepicker-current-day").trigger("click"),e()}).hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}).appendTo(q);if(a(this).click(function(){return f(),!1}),q.hide().find(".range-start, .range-end, .btnDone").hide(),p.data("state","closed"),q.find(".ui-datepicker").css("display","block"),a(j.appendTo).append(p),p.wrap('<div class="ui-daterangepickercontain"></div>'),j.arrows&&1==i.size()){var s=a('<a href="#" class="ui-daterangepicker-prev ui-corner-all" title="'+j.prevLinkText+'"><span class="ui-icon ui-icon-circle-triangle-w">'+j.prevLinkText+"</span></a>"),t=a('<a href="#" class="ui-daterangepicker-next ui-corner-all" title="'+j.nextLinkText+'"><span class="ui-icon ui-icon-circle-triangle-e">'+j.nextLinkText+"</span></a>");a(this).addClass("ui-rangepicker-input ui-widget-content").wrap('<div class="ui-daterangepicker-arrows ui-widget ui-widget-header ui-helper-clearfix ui-corner-all"></div>').before(s).before(t).parent().find("a").click(function(){var b=q.find(".range-start").datepicker("getDate"),c=q.find(".range-end").datepicker("getDate"),d=Math.abs(new TimeSpan(b-c).getTotalMilliseconds())+864e5;return a(this).is(".ui-daterangepicker-prev")&&(d=-d),q.find(".range-start, .range-end ").each(function(){var b=a(this).datepicker("getDate");return null==b?!1:void a(this).datepicker("setDate",b.add({milliseconds:d})).find(".ui-datepicker-current-day").trigger("click")}),!1}).hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")});var u=i.parent()}return a(document).click(function(){p.is(":visible")&&e()}),p.click(function(){return!1}).hide(),this}}(jQuery),function(a,b){function c(a){var b=/([0-9]{4}-[0-9]{2}-[0-9]{2}) ?([0-9]{2}:[0-9]{2}:[0-9]{2})?/.exec(a);return void 0!==b[1]?void 0!==b[2]?new Date(b[1]+"T"+b[2]):new Date(b[1]+"T00:00:00"):!1}b.bindingHandlers.datepicker={init:function(d,e,f){var g,h=a(d),i=f().rangePicker||!1,j=e(),k=b.utils.unwrapObservable(j);"string"==typeof k?g=c(k):k instanceof Date?g=k:(g=new Date,g.setHours(g.getHours()-g.getTimezoneOffset()/60),j(g));var l=f().datepickerOptions||{};l.defaultDate=g,i?(l.onChange=function(){h.val();"function"==typeof j&&j(h.val())},h.daterangepicker(l)):(h.datepicker(l),b.utils.registerEventHandler(d,"change",function(){"function"==typeof j&&j(j()instanceof Date?a(d).datepicker("getDate"):a.datepicker.formatDate("yy-mm-dd",a(d).datepicker("getDate")))}),b.utils.domNodeDisposal.addDisposeCallback(d,function(){h.datepicker("destroy")}))},update:function(d,e){var f=b.utils.unwrapObservable(e());if(void 0!=f&&"boolean"!=typeof f){var g;if("string"==typeof f)g=c(f);else{if(!(f instanceof Date))return;g=f}a(d).datepicker("setDate",g)}}}}(jQuery,ko),void 0!==window.elRTE&&!function(a,b,c){"use strict";var d=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,a.apply(e,f)};c&&clearTimeout(d),(c||!d)&&(d=setTimeout(g,b))}};b.bindingHandlers.elrte={init:function(c,e,f){var g=a(c),h=b.utils.unwrapObservable(e()),i=f().value;i&&i.subscribe&&(g.val(b.utils.unwrapObservable(i)),i.subscribe(function(a){c._updating||g.elrte("val",g.val())})),g.elrte(h);var j=d(function(){c._updating=!0,g.elrte("updateSource").change(),c._updating=!1},200,!0),k=c.elrte.iframe.contentWindow.window.focus;c.elrte.iframe.contentWindow.window.focus=function(){j(),k.apply(this,arguments)},c.elrte.$doc.on("keyup",j),b.utils.domNodeDisposal.addDisposeCallback(c,function(){g.elrte("destroy")})},update:function(a,b,c,d){}},b.bindingHandlers.elfinder={init:function(c,d){var e=a(c),f=b.utils.unwrapObservable(d());e.elfinder(f),b.utils.domNodeDisposal.addDisposeCallback(c,function(){e.elfinder("destroy")})},update:function(a,b,c,d){}}}(jQuery,ko,elRTE),function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):a(window.jQuery)}(function(a){"use strict";var b=0;a.ajaxTransport("iframe",function(c){if(c.async&&("POST"===c.type||"GET"===c.type)){var d,e;return{send:function(f,g){d=a('<form style="display:none;"></form>'),e=a('<iframe src="javascript:false;" name="iframe-transport-'+(b+=1)+'"></iframe>').bind("load",function(){var b,f=a.isArray(c.paramName)?c.paramName:[c.paramName];e.unbind("load").bind("load",function(){var b;try{if(b=e.contents(),!b.length||!b[0].firstChild)throw new Error}catch(c){b=void 0}g(200,"success",{iframe:b}),a('<iframe src="javascript:false;"></iframe>').appendTo(d),d.remove()}),d.prop("target",e.prop("name")).prop("action",c.url).prop("method",c.type),c.formData&&a.each(c.formData,function(b,c){a('<input type="hidden"/>').prop("name",c.name).val(c.value).appendTo(d)}),c.fileInput&&c.fileInput.length&&"POST"===c.type&&(b=c.fileInput.clone(),c.fileInput.after(function(a){return b[a]}),c.paramName&&c.fileInput.each(function(b){a(this).prop("name",f[b]||c.paramName)}),d.append(c.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data")),d.submit(),b&&b.length&&c.fileInput.each(function(c,d){var e=a(b[c]);a(d).prop("name",e.prop("name")),e.replaceWith(d)})}),d.append(e).appendTo(document.body)},abort:function(){e&&e.unbind("load").prop("src","javascript".concat(":false;")),d&&d.remove()}}}}),a.ajaxSetup({converters:{"iframe text":function(b){return a(b[0].body).text()},"iframe json":function(b){return a.parseJSON(a(b[0].body).text())},"iframe html":function(b){return a(b[0].body).html()},"iframe script":function(b){return a.globalEval(a(b[0].body).text())}}})}),function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],a):a(window.jQuery)}(function(a){"use strict";a.support.xhrFileUpload=!(!window.XMLHttpRequestUpload||!window.FileReader),a.support.xhrFormDataFileUpload=!!window.FormData,a.widget("blueimp.fileupload",{options:{namespace:void 0,dropZone:a(document),fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,formData:function(a){return a.serializeArray()},add:function(a,b){b.submit()},processData:!1,contentType:!1,cache:!1},_refreshOptionsList:["namespace","dropZone","fileInput","multipart","forceIframeTransport"],_isXHRUpload:function(b){return!b.forceIframeTransport&&(!b.multipart&&a.support.xhrFileUpload||a.support.xhrFormDataFileUpload)},_getFormData:function(b){var c;return"function"==typeof b.formData?b.formData(b.form):a.isArray(b.formData)?b.formData:b.formData?(c=[],a.each(b.formData,function(a,b){c.push({name:a,value:b})}),c):[]},_getTotal:function(b){var c=0;return a.each(b,function(a,b){c+=b.size||1}),c},_onProgress:function(a,b){if(a.lengthComputable){var c=b.total||this._getTotal(b.files),d=parseInt(a.loaded/a.total*(b.chunkSize||c),10)+(b.uploadedBytes||0);this._loaded+=d-(b.loaded||b.uploadedBytes||0),b.lengthComputable=!0,b.loaded=d,b.total=c,this._trigger("progress",a,b),this._trigger("progressall",a,{lengthComputable:!0,loaded:this._loaded,total:this._total})}},_initProgressListener:function(b){var c=this,d=b.xhr?b.xhr():a.ajaxSettings.xhr();d.upload&&(a(d.upload).bind("progress",function(a){var d=a.originalEvent;a.lengthComputable=d.lengthComputable,a.loaded=d.loaded,a.total=d.total,c._onProgress(a,b)}),b.xhr=function(){return d})},_initXHRData:function(b){var c,d=b.files[0],e=b.multipart||!a.support.xhrFileUpload,f=b.paramName[0];(!e||b.blob)&&(b.headers=a.extend(b.headers,{"X-File-Name":d.name,"X-File-Type":d.type,"X-File-Size":d.size}),b.blob?e||(b.contentType="application/octet-stream",b.data=b.blob):(b.contentType=d.type,b.data=d)),e&&a.support.xhrFormDataFileUpload&&(b.postMessage?(c=this._getFormData(b),b.blob?c.push({name:f,value:b.blob}):a.each(b.files,function(a,d){c.push({name:b.paramName[a]||f,value:d})})):(b.formData instanceof FormData?c=b.formData:(c=new FormData,a.each(this._getFormData(b),function(a,b){c.append(b.name,b.value)})),b.blob?c.append(f,b.blob,d.name):a.each(b.files,function(a,d){d instanceof Blob&&c.append(b.paramName[a]||f,d,d.name)})),b.data=c),b.blob=null},_initIframeSettings:function(b){b.dataType="iframe "+(b.dataType||""),b.formData=this._getFormData(b),b.redirect&&a("<a></a>").prop("href",b.url).prop("host")!==location.host&&b.formData.push({name:b.redirectParamName||"redirect",value:b.redirect})},_initDataSettings:function(a){this._isXHRUpload(a)?(this._chunkedUpload(a,!0)||(a.data||this._initXHRData(a),this._initProgressListener(a)),a.postMessage&&(a.dataType="postmessage "+(a.dataType||""))):this._initIframeSettings(a,"iframe")},_getParamName:function(b){var c=a(b.fileInput),d=b.paramName;return d?a.isArray(d)||(d=[d]):(d=[],c.each(function(){for(var b=a(this),c=b.prop("name")||"files[]",e=(b.prop("files")||[1]).length;e;)d.push(c),e-=1}),d.length||(d=[c.prop("name")||"files[]"])),d},_initFormSettings:function(b){b.form&&b.form.length||(b.form=a(b.fileInput.prop("form"))),b.paramName=this._getParamName(b),b.url||(b.url=b.form.prop("action")||location.href),b.type=(b.type||b.form.prop("method")||"").toUpperCase(),"POST"!==b.type&&"PUT"!==b.type&&(b.type="POST")},_getAJAXSettings:function(b){var c=a.extend({},this.options,b);return this._initFormSettings(c),this._initDataSettings(c),c},_enhancePromise:function(a){return a.success=a.done,a.error=a.fail,a.complete=a.always,a},_getXHRPromise:function(b,c,d){var e=a.Deferred(),f=e.promise();return c=c||this.options.context||f,b===!0?e.resolveWith(c,d):b===!1&&e.rejectWith(c,d),f.abort=e.promise,this._enhancePromise(f)},_chunkedUpload:function(b,c){var d,e,f,g,h=this,i=b.files[0],j=i.size,k=b.uploadedBytes=b.uploadedBytes||0,l=b.maxChunkSize||j,m=i.webkitSlice||i.mozSlice||i.slice;return this._isXHRUpload(b)&&m&&(k||j>l)&&!b.data?c?!0:k>=j?(i.error="uploadedBytes",this._getXHRPromise(!1,b.context,[null,"error",i.error])):(e=Math.ceil((j-k)/l),d=function(c){return c?d(c-=1).pipe(function(){var d=a.extend({},b);return d.blob=m.call(i,k+c*l,k+(c+1)*l),d.chunkSize=d.blob.size,h._initXHRData(d),h._initProgressListener(d),f=(a.ajax(d)||h._getXHRPromise(!1,d.context)).done(function(){d.loaded||h._onProgress(a.Event("progress",{lengthComputable:!0,loaded:d.chunkSize,total:d.chunkSize}),d),b.uploadedBytes=d.uploadedBytes+=d.chunkSize})}):h._getXHRPromise(!0,b.context)},g=d(e),g.abort=function(){return f.abort()},this._enhancePromise(g)):!1},_beforeSend:function(a,b){0===this._active&&this._trigger("start"),this._active+=1,this._loaded+=b.uploadedBytes||0,this._total+=this._getTotal(b.files)},_onDone:function(b,c,d,e){this._isXHRUpload(e)||this._onProgress(a.Event("progress",{lengthComputable:!0,loaded:1,total:1}),e),e.result=b,e.textStatus=c,e.jqXHR=d,this._trigger("done",null,e)},_onFail:function(a,b,c,d){d.jqXHR=a,d.textStatus=b,d.errorThrown=c,this._trigger("fail",null,d),d.recalculateProgress&&(this._loaded-=d.loaded||d.uploadedBytes||0,this._total-=d.total||this._getTotal(d.files))},_onAlways:function(a,b,c,d){this._active-=1,d.textStatus=b,c&&c.always?(d.jqXHR=c,d.result=a):(d.jqXHR=a,d.errorThrown=c),this._trigger("always",null,d),0===this._active&&(this._trigger("stop"),this._loaded=this._total=0)},_onSend:function(b,c){var d,e,f,g=this,h=g._getAJAXSettings(c),i=function(c,e){return g._sending+=1,d=d||(c!==!1&&g._trigger("send",b,h)!==!1&&(g._chunkedUpload(h)||a.ajax(h))||g._getXHRPromise(!1,h.context,e)).done(function(a,b,c){g._onDone(a,b,c,h)}).fail(function(a,b,c){g._onFail(a,b,c,h)}).always(function(a,b,c){if(g._sending-=1,g._onAlways(a,b,c,h),h.limitConcurrentUploads&&h.limitConcurrentUploads>g._sending)for(var d=g._slots.shift();d;){if(!d.isRejected()){d.resolve();break}d=g._slots.shift()}})};return this._beforeSend(b,h),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(e=a.Deferred(),this._slots.push(e),f=e.pipe(i)):f=this._sequence=this._sequence.pipe(i,i),f.abort=function(){var a=[void 0,"abort","abort"];return d?d.abort():(e&&e.rejectWith(a),i(!1,a))},this._enhancePromise(f)):i()},_onAdd:function(b,c){var d,e,f,g,h=this,i=!0,j=a.extend({},this.options,c),k=j.limitMultiFileUploads,l=this._getParamName(j);if((j.singleFileUploads||k)&&this._isXHRUpload(j))if(!j.singleFileUploads&&k)for(f=[],d=[],g=0;g<c.files.length;g+=k)f.push(c.files.slice(g,g+k)),e=l.slice(g,g+k),e.length||(e=l),d.push(e);else d=l;else f=[c.files],d=[l];return c.originalFiles=c.files,a.each(f||c.files,function(e,g){var j=a.extend({},c);return j.files=f?g:[g],j.paramName=d[e],j.submit=function(){return j.jqXHR=this.jqXHR=h._trigger("submit",b,this)!==!1&&h._onSend(b,this),this.jqXHR},i=h._trigger("add",b,j)}),i},_normalizeFile:function(a,b){void 0===b.name&&void 0===b.size&&(b.name=b.fileName,b.size=b.fileSize)},_replaceFileInput:function(b){var c=b.clone(!0);a("<form></form>").append(c)[0].reset(),b.after(c).detach(),a.cleanData(b.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(a,d){return d===b[0]?c[0]:d}),b[0]===this.element[0]&&(this.element=c)},_onChange:function(b){var c=b.data.fileupload,d={files:a.each(a.makeArray(b.target.files),c._normalizeFile),fileInput:a(b.target),form:a(b.target.form)};return d.files.length||(d.files=[{name:b.target.value.replace(/^.*\\/,"")}]),c.options.replaceFileInput&&c._replaceFileInput(d.fileInput),c._trigger("change",b,d)===!1||c._onAdd(b,d)===!1?!1:void 0},_onPaste:function(b){var c=b.data.fileupload,d=b.originalEvent.clipboardData,e=d&&d.items||[],f={files:[]};return a.each(e,function(a,b){var c=b.getAsFile&&b.getAsFile();c&&f.files.push(c)}),c._trigger("paste",b,f)===!1||c._onAdd(b,f)===!1?!1:void 0},_onDrop:function(b){var c=b.data.fileupload,d=b.dataTransfer=b.originalEvent.dataTransfer,e={files:a.each(a.makeArray(d&&d.files),c._normalizeFile)};return c._trigger("drop",b,e)===!1||c._onAdd(b,e)===!1?!1:void b.preventDefault()},_onDragOver:function(a){var b=a.data.fileupload,c=a.dataTransfer=a.originalEvent.dataTransfer;return b._trigger("dragover",a)===!1?!1:(c&&(c.dropEffect=c.effectAllowed="copy"),void a.preventDefault())},_initEventHandlers:function(){var a=this.options.namespace;this._isXHRUpload(this.options)&&this.options.dropZone.bind("dragover."+a,{fileupload:this},this._onDragOver).bind("drop."+a,{fileupload:this},this._onDrop).bind("paste."+a,{fileupload:this},this._onPaste),this.options.fileInput.bind("change."+a,{fileupload:this},this._onChange)},_destroyEventHandlers:function(){var a=this.options.namespace;this.options.dropZone.unbind("dragover."+a,this._onDragOver).unbind("drop."+a,this._onDrop).unbind("paste."+a,this._onPaste),this.options.fileInput.unbind("change."+a,this._onChange)},_setOption:function(b,c){var d=-1!==a.inArray(b,this._refreshOptionsList);d&&this._destroyEventHandlers(),a.Widget.prototype._setOption.call(this,b,c),d&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var b=this.options;void 0===b.fileInput?b.fileInput=this.element.is("input:file")?this.element:this.element.find("input:file"):b.fileInput instanceof a||(b.fileInput=a(b.fileInput)),b.dropZone instanceof a||(b.dropZone=a(b.dropZone))},_create:function(){var b=this.options,c=a.extend({},this.element.data());c[this.widgetName]=void 0,a.extend(b,c),b.namespace=b.namespace||this.widgetName,this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=this._loaded=this._total=0,this._initEventHandlers()},destroy:function(){
this._destroyEventHandlers(),a.Widget.prototype.destroy.call(this)},enable:function(){a.Widget.prototype.enable.call(this),this._initEventHandlers()},disable:function(){this._destroyEventHandlers(),a.Widget.prototype.disable.call(this)},add:function(b){b&&!this.options.disabled&&(b.files=a.each(a.makeArray(b.files),this._normalizeFile),this._onAdd(null,b))},send:function(b){return b&&!this.options.disabled&&(b.files=a.each(a.makeArray(b.files),this._normalizeFile),b.files.length)?this._onSend(null,b):this._getXHRPromise(!1,b&&b.context)}})}),function(a,b){"use strict";b.bindingHandlers.fileupload={init:function(c,d){var e=b.utils.unwrapObservable(d());a(c).fileupload(e),b.utils.domNodeDisposal.addDisposeCallback(c,function(){a(c).fileupload("destroy")})},update:function(c,d,e,f){var g=b.utils.unwrapObservable(d());a(c).fileupload("option",g)}}}(jQuery,ko),function(a){"use strict";metaproject.ui=metaproject.ui||{},metaproject.ui.Grid=function(b,c){var d=this;c=a.extend({},{columns:[],actions:[]},c),d.data=b,0==c.columns.length?0==ko.unwrap(d.data).length&&d.data instanceof ko.observable&&(d.columns=ko.computed(function(){var b=ko.unwrap(d.data);b.length>0&&a.each(b[0],function(a,b){})},d)):d.columns=c.columns,d.actions=c.actions},metaproject.ui.Grid.html='<table class="table table-striped table-condensed">         <thead>         <tr>             <!-- ko foreach: columns -->             <th data-bind="html: label"></th>             <!-- /ko -->             <!-- ko if: actions.length > 0 -->             <th></th>             <!-- /ko -->         </tr>         </thead>         <tbody data-bind="foreach: data">             <tr data-bind="">         <!-- ko foreach: $parent.columns -->                 <td data-bind="html: typeof value == \'function\' ? value($parent) : $parent[value]"></td>         <!-- /ko -->                 <td data-bind="foreach: $parent.actions">                     <button class="btn" data-bind="click: function() { fn($parent); }, html: label, css: $data.css || {}"></button>                 </td>             </tr>         </tbody>     </table>',ko.bindingHandlers.grid={init:function(a,b,c,d,e){a.innerHTML=metaproject.ui.Grid.html;var f=e.createChildContext(b(),null,function(a){ko.utils.extend(a,b())});return ko.applyBindingsToDescendants(f,a),{controlsDescendantBindings:!0}},update:function(a,b,c,d,e){}}}(jQuery),function(a){void 0===a.browser&&(a.browser={msie:window.navigator.userAgent.indexOf("MSIE ")>0,mozilla:window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1});var b=(a.browser.msie?"paste":"input")+".mask",c=void 0!=window.orientation;a.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},dataName:"rawMaskFn"},a.fn.extend({caret:function(a,b){if(0!=this.length){if("number"==typeof a)return b="number"==typeof b?b:a,this.each(function(){if(this.setSelectionRange)this.setSelectionRange(a,b);else if(this.createTextRange){var c=this.createTextRange();c.collapse(!0),c.moveEnd("character",b),c.moveStart("character",a),c.select()}});if(this[0].setSelectionRange)a=this[0].selectionStart,b=this[0].selectionEnd;else if(document.selection&&document.selection.createRange){var c=document.selection.createRange();a=0-c.duplicate().moveStart("character",-1e5),b=a+c.text.length}return{begin:a,end:b}}},unmask:function(){return this.trigger("unmask")},mask:function(d,e){if(!d&&this.length>0){var f=a(this[0]);return f.data(a.mask.dataName)()}e=a.extend({placeholder:"_",completed:null},e);var g=a.mask.definitions,h=[],i=d.length,j=null,k=d.length;return a.each(d.split(""),function(a,b){"?"==b?(k--,i=a):g[b]?(h.push(new RegExp(g[b])),null==j&&(j=h.length-1)):h.push(null)}),this.trigger("unmask").each(function(){function f(a){for(;++a<=k&&!h[a];);return a}function l(a){for(;--a>=0&&!h[a];);return a}function m(a,b){if(!(0>a)){for(var c=a,d=f(b);k>c;c++)if(h[c]){if(!(k>d&&h[c].test(u[d])))break;u[c]=u[d],u[d]=e.placeholder,d=f(d)}r(),t.caret(Math.max(j,a))}}function n(a){for(var b=a,c=e.placeholder;k>b;b++)if(h[b]){var d=f(b),g=u[b];if(u[b]=c,!(k>d&&h[d].test(g)))break;c=g}}function o(a){var b=a.which;if(8==b||46==b||c&&127==b){var d=t.caret(),e=d.begin,g=d.end;return g-e==0&&(e=46!=b?l(e):g=f(e-1),g=46==b?f(g):g),q(e,g),m(e,g-1),!1}return 27==b?(t.val(v),t.caret(0,s()),!1):void 0}function p(a){var b=a.which,c=t.caret();if(a.ctrlKey||a.altKey||a.metaKey||32>b)return!0;if(b){c.end-c.begin!=0&&(q(c.begin,c.end),m(c.begin,c.end-1));var d=f(c.begin-1);if(k>d){var g=String.fromCharCode(b);if(h[d].test(g)){n(d),u[d]=g,r();var i=f(d);t.caret(i),e.completed&&i>=k&&e.completed.call(t)}}return!1}}function q(a,b){for(var c=a;b>c&&k>c;c++)h[c]&&(u[c]=e.placeholder)}function r(){return t.val(u.join("")).val()}function s(a){for(var b=t.val(),c=-1,d=0,f=0;k>d;d++)if(h[d]){for(u[d]=e.placeholder;f++<b.length;){var g=b.charAt(f-1);if(h[d].test(g)){u[d]=g,c=d;break}}if(f>b.length)break}else u[d]==b.charAt(f)&&d!=i&&(f++,c=d);return!a&&i>c+1?(t.val(""),q(0,k)):(a||c+1>=i)&&(r(),a||t.val(t.val().substring(0,c+1))),i?d:j}var t=a(this),u=a.map(d.split(""),function(a,b){return"?"!=a?g[a]?e.placeholder:a:void 0}),v=t.val();t.data(a.mask.dataName,function(){return a.map(u,function(a,b){return h[b]&&a!=e.placeholder?a:null}).join("")}),t.attr("readonly")||t.one("unmask",function(){t.unbind(".mask").removeData(a.mask.dataName)}).bind("focus.mask",function(){v=t.val();var b=s();r();var c=function(){b==d.length?t.caret(0,b):t.caret(b)};(a.browser.msie?c:function(){setTimeout(c,0)})()}).bind("blur.mask",function(){s(),t.val()!=v&&t.change()}).bind("keydown.mask",o).bind("keypress.mask",p).bind(b,function(){setTimeout(function(){t.caret(s(!0))},0)}),s()})}})}(jQuery),function(a){a.fn.maskMoney=function(b){return b=a.extend({symbol:"US$",showSymbol:!1,symbolStay:!1,thousands:",",decimal:".",precision:2,defaultZero:!0,allowZero:!1,allowNegative:!1},b),this.each(function(){function c(){r=!0}function d(){r=!1}function e(b){b=b||window.event;var e=b.charCode||b.keyCode||b.which;if(void 0==e)return!1;if(q.attr("readonly")&&13!=e&&9!=e)return!1;if(48>e||e>57)return 45==e?(c(),q.val(p(q)),!1):43==e?(c(),q.val(q.val().replace("-","")),!1):13==e||9==e?(r&&(d(),a(this).change()),!0):37==e||39==e?!0:(i(b),!0);if(q.val().length>=q.attr("maxlength"))return!1;i(b);var f=String.fromCharCode(e),g=q.get(0),h=q.getInputSelection(g),k=h.start,l=h.end;return g.value=g.value.substring(0,k)+f+g.value.substring(l,g.value.length),j(g,k+1),c(),!1}function f(b){b=b||window.event;var e=b.charCode||b.keyCode||b.which;if(void 0==e)return!1;if(q.attr("readonly")&&13!=e&&9!=e)return!1;var f=q.get(0),g=q.getInputSelection(f),h=g.start,k=g.end;return 8==e?(i(b),h==k?(f.value=f.value.substring(0,h-1)+f.value.substring(k,f.value.length),h-=1):f.value=f.value.substring(0,h)+f.value.substring(k,f.value.length),j(f,h),c(),!1):9==e?(r&&(a(this).change(),d()),!0):46==e||63272==e?(i(b),f.selectionStart==f.selectionEnd?f.value=f.value.substring(0,h)+f.value.substring(k+1,f.value.length):f.value=f.value.substring(0,h)+f.value.substring(k,f.value.length),j(f,h),c(),!1):!0}function g(a){var c=n();if(q.val()==c?q.val(""):""==q.val()&&b.defaultZero?q.val(o(c)):q.val(o(q.val())),this.createTextRange){var d=this.createTextRange();d.collapse(!1),d.select()}}function h(c){a.browser.msie&&e(c),""==q.val()||q.val()==o(n())||q.val()==b.symbol?b.allowZero?b.symbolStay?q.val(o(n())):q.val(n()):q.val(""):b.symbolStay?b.symbolStay&&q.val()==b.symbol&&q.val(o(n())):q.val(q.val().replace(b.symbol,""))}function i(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function j(a,b){var c=q.val().length;q.val(k(a.value));var d=q.val().length;b-=c-d,q.setCursorPosition(b)}function k(a){a=a.replace(b.symbol,"");var c="0123456789",d=a.length,e="",f="",g="";if(0!=d&&"-"==a.charAt(0)&&(a=a.replace("-",""),b.allowNegative&&(g="-")),0==d){if(!b.defaultZero)return f;f="0.00"}for(var h=0;d>h&&("0"==a.charAt(h)||a.charAt(h)==b.decimal);h++);for(;d>h;h++)-1!=c.indexOf(a.charAt(h))&&(e+=a.charAt(h));var i=parseFloat(e);return i=isNaN(i)?0:i/Math.pow(10,b.precision),q.trigger("money.change",[i]),l(i)}function l(a){"number"!=typeof a&&(a=0);var c,d=a.toFixed(b.precision),e=0>a?"-":"",f=0==b.precision?0:1,g=(d=d.split("."))[f].substr(0,b.precision);for(c=(d=d[0]).length;(c-=3)>=1;)d=d.substr(0,c)+b.thousands+d.substr(c);return o(b.precision>0?e+d+b.decimal+g+Array(b.precision+1-g.length).join(0):e+d)}function m(){var a=q.val();q.val(k(a))}function n(){var a=parseFloat("0")/Math.pow(10,b.precision);return a.toFixed(b.precision).replace(new RegExp("\\.","g"),b.decimal)}function o(a){return b.showSymbol&&a.substr(0,b.symbol.length)!=b.symbol?b.symbol+a:a}function p(a){if(b.allowNegative){a.val();return""!=a.val()&&"-"==a.val().charAt(0)?a.val().replace("-",""):"-"+a.val()}return a.val()}var q=a(this),r=!1;q.bind("keypress.maskMoney",e),q.bind("keydown.maskMoney",f),q.bind("blur.maskMoney",h),q.bind("focus.maskMoney",g),q.bind("mask",m),q.bind("money.update",function(a,b){q.val(l(b))}),q.one("unmaskMoney",function(){q.unbind(".maskMoney"),a.browser.msie?this.onpaste=null:a.browser.mozilla&&this.removeEventListener("input",h,!1)})})},a.fn.unmaskMoney=function(){return this.trigger("unmaskMoney")},a.fn.maskValue=function(){return this.trigger("mask")},a.fn.setCursorPosition=function(a){return this.each(function(b,c){if(c.setSelectionRange)c.focus(),c.setSelectionRange(a,a);else if(c.createTextRange){var d=c.createTextRange();d.collapse(!0),d.moveEnd("character",a),d.moveStart("character",a),d.select()}}),this},a.fn.getInputSelection=function(a){var b,c,d,e,f,g=0,h=0;return"number"==typeof a.selectionStart&&"number"==typeof a.selectionEnd?(g=a.selectionStart,h=a.selectionEnd):(c=document.selection.createRange(),c&&c.parentElement()==a&&(e=a.value.length,b=a.value.replace(/\r\n/g,"\n"),d=a.createTextRange(),d.moveToBookmark(c.getBookmark()),f=a.createTextRange(),f.collapse(!1),d.compareEndPoints("StartToEnd",f)>-1?g=h=e:(g=-d.moveStart("character",-e),g+=b.slice(0,g).split("\n").length-1,d.compareEndPoints("EndToEnd",f)>-1?h=e:(h=-d.moveEnd("character",-e),h+=b.slice(0,h).split("\n").length-1)))),{start:g,end:h}}}(jQuery),function(a,b){b.bindingHandlers.mask={init:function(b,c){var d=a(b),e=c();d.mask(e)}},b.bindingHandlers.money={init:function(c,d,e){var f=a(c);b.utils.domNodeDisposal.addDisposeCallback(c,function(){f.datepicker("destroy")});var g=e().maskSettings||{};f.maskMoney(g),b.utils.registerEventHandler(c,"money.change",function(a,b){var c=d();c(b)})},update:function(c,d){var e=b.utils.unwrapObservable(d());"number"!=typeof e&&(e=parseFloat(e)||0),a(c).trigger("money.update",[e])}}}(jQuery,ko),void 0!==window.tinymce&&function(a,b,c){"use strict";b.bindingHandlers.tinymce={init:function(d,e,f,g){var h=f().tinymceOptions||{},i=e();a(d).val(b.utils.unwrapObservable(i)),b.isWriteableObservable(i)&&(h.setup=function(a){a.onChange.add(function(a,b){i(a.getContent())})}),d.id||(d.id="mp_tinymce_"+(new Date).getTime()),h=a.extend({theme:"simple"},h),h.mode="exact",h.elements=d.id,c.init(h),b.utils.domNodeDisposal.addDisposeCallback(d,function(){c.execCommand("mceFocus",!1,d.id),c.execCommand("mceRemoveControl",!1,d.id)})},update:function(a,d,e,f){b.utils.unwrapObservable(d()),c.get(a.id)}}}(jQuery,ko,tinymce);